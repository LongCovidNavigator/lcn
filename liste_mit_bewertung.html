<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Long Covid Navigator – Bewertung (aus Wiki)</title>
    <link rel="stylesheet" href="styles/general.css">
    <link rel="stylesheet" href="styles/navigation.css">
    <link rel="stylesheet" href="styles/filter.css">
    <link rel="stylesheet" href="styles/lcnprotocol_table.css">
    <link rel="stylesheet" href="styles/uebersicht_table.css">
    <link rel="stylesheet" href="styles/bewertung_table.css">
    <link rel="stylesheet" href="styles/footer-style.css">
</head>

<body>
    <div id="header-placeholder"></div>

    <div class="container">
        <h1>Bewertung – aus dem Wiki</h1>
        <table class="bewertung-table">
            <thead>
                <tr>
					<th>#</th>
					<th>Behandlungsoption</th>
					<th>Bewertung</th>
					<th>Verbesserung in [%]</th>
					<th>Verschlechterung in [%]</th> <!-- New column -->
				</tr>
            </thead>
            <tbody id="bewertung-body"></tbody>
        </table>
    </div>

    <div id="footer-placeholder"></div>

    <script>
        // Lade Header & Footer
        fetch("components/header.html")
            .then(res => res.text())
            .then(data => document.getElementById("header-placeholder").innerHTML = data);

        fetch("components/footer.html")
            .then(res => res.text())
            .then(data => document.getElementById("footer-placeholder").innerHTML = data);

        // Lade BookStack-Daten und formatiere sie passend
        fetch("api/get_therapien.php")
            .then(res => res.json())
            .then(data => {
                // Mappe Felder um, damit bewertung.js damit arbeiten kann
                const umgewandelt = data.map(entry => ({
                    Behandlung: entry.title,
                    id: entry.slug
                }));

                // Übergib global (falls bewertung.js das braucht)
                window.BEWERTUNGS_DATEN = umgewandelt;

                // Starte Bewertungsskript (das bleibt unverändert)
                const script = document.createElement("script");
                script.src = "scripts/bewertung.js";
                document.body.appendChild(script);
            });
    </script>
</body>
</html>
